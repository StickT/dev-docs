<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.5.0_06) on Mon Jun 26 19:39:21 EDT 2006 -->
<TITLE>
Overview (Time)
</TITLE>

<META NAME="keywords" CONTENT="Overview">

<LINK REL ="stylesheet" TYPE="text/css" HREF="stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    parent.document.title="Overview (Time)";
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">

<HR>
Time
                This section contains classes that describe high-resolution time.
<P>
<B>See:</B>
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="#overview_description"><B>Description</B></A>
<P>

<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Packages</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="20%"><B><A HREF="javax/realtime/package-summary.html">javax.realtime</A></B></TD>
<TD>&nbsp;</TD>
</TR>
</TABLE>

<P>
&nbsp;<A NAME="overview_description"><!-- --></A>
<P>
<h1>Time</h1>
                <p>This section contains classes that describe high-resolution time.  These classes:</p>
                <ul>
                        <li>Allow description of a point in time with up to nanosecond accuracy and precision (actual accuracy and precision is dependent on the precision of the underlying system).
                        <li>Allow distinctions between absolute points in time, and times relative to some starting point.
                </ul>
                <h2>Definitions</h2>
                The following terms and abbreviations will be used:
                <P>
                A <i>time object</i>  is an instance of <code>AbsoluteTime</code>, <code>RelativeTime</code>, or <code>RationalTime</code>.
                </P>
                <P>
                A <i>time object</i> is always associated with a <code>clock</code>. By default it is associated with the real-time clock.
                </P>
                <P>
                The <i>Epoch</i>  is the standard base time, conventionally January 1 00:00:00 GMT 1970. It is the point from which the real-time clock measures absolute time.
                </P>
                <P>
                The <i>time value representation</i>  is a compound format composed of 64 bits of millisecond timing, and 32 bits of nanoseconds within a millisecond. The millisecond constituent uses the 64 bits of a Java <code>long</code> while the nanosecond constituent uses the 32 bits of a Java <code>int</code>.
                </P>
                <P>
                The <i>normalized (canonical) form</i>  for time objects uniquely specifies the values for the millisecond and nanosecond components of a point in time, including the case of 0 milliseconds or 0 nanoseconds, and a negative time value, according to the following three rules:
                <ol>
                        <li>When both millisecond and nanosecond components are nonzero they have the same sign. The algebraic time value of the time object is the algebraic sum of the two components.
                        <li>The millisecond component represents the algebraic number of milliseconds in the time object, with a range of [-2<sup>63</sup>, 2<sup>63</sup>-1]
                        <li>The nanosecond component represents the algebraic number of nanoseconds within a millisecond in the time object, that is [-10<sup>6</sup>+1, 10<sup>6</sup>-1].
                </ol>
                <p>Instances of HighResolutionTime classes always hold a normalized form of a time value. Values that cannot be normalized are not valid; for example, (MAX_LONG milliseconds, MAX_INT nanoseconds) cannot be normalized and is an illegal value.</p>
<p> The following table has examples of normalized representations. </p>
<ol>
        <center>
                <table border="1" width="70%">
                        <tr>
                                <th width="24%">
                                        <center>
                                        time in ns
                                        </center>
                                </th>
                                <th width="39%">
                                        <center>
                                        millis
                                        </center>
                                </th>
                                <th width="37%">
                                        <center>
                                        nanos
                                        </center>
                                </th>
                        </tr>
                        <tr>
                                <td>
                                        <center>
                                        2000000
                                        </center>
                                </td>
                                <td>
                                        <center>
                                        2
                                        </center>
                                </td>
                                <td>
                                        <center>
                                        0
                                        </center>
                                </td>
                        </tr>
                        <tr>
                                <td>
                                        <center>
                                        1999999
                                        </center>
                                </td>
                                <td>
                                        <center>
                                        1
                                        </center>
                                </td>
                                <td>
                                        <center>
                                        999999
                                        </center>
                                </td>
                        </tr>
                        <tr>
                                <td>
                                        <center>
                                        1000001
                                        </center>
                                </td>
                                <td>
                                        <center>
                                        1
                                        </center>
                                </td>
                                <td>
                                        <center>
                                        1
                                        </center>
                                </td>
                        </tr>
                        <tr>
                                <td>
                                        <center>
                                        1
                                        </center>
                                </td>
                                <td>
                                        <center>
                                        0
                                        </center>
                                </td>
                                <td>
                                        <center>
                                        1
                                        </center>
                                </td>
                        </tr>
                        <tr>
                                <td>
                                        <center>
                                        0
                                        </center>
                                </td>
                                <td>
                                        <center>
                                        0
                                        </center>
                                </td>
                                <td>
                                        <center>
                                        0
                                        </center>
                                </td>
                        </tr>
                        <tr>
                                <td>
                                        <center>
                                        -1
                                        </center>
                                </td>
                                <td>
                                        <center>
                                        0
                                        </center>
                                </td>
                                <td>
                                        <center>
                                        -1
                                        </center>
                                </td>
                        </tr>
                        <tr>
                                <td>
                                        <center>
                                        -999999
                                        </center>
                                </td>
                                <td>
                                        <center>
                                        0
                                        </center>
                                </td>
                                <td>
                                        <center>
                                        -999999
                                        </center>
                                </td>
                        </tr>
                        <tr>
                                <td>
                                        <center>
                                        -1000000
                                        </center>
                                </td>
                                <td>
                                        <center>
                                        -1
                                        </center>
                                </td>
                                <td>
                                        <center>
                                        0
                                        </center>
                                </td>
                        </tr>
                        <tr>
                                <td>
                                        <center>
                                        -1000001
                                        </center>
                                </td>
                                <td>
                                        <center>
                                        -1
                                        </center>
                                </td>
                                <td>
                                        <center>
                                        -1
                                        </center>
                                </td>
                        </tr>
                </table>
        </center>
</ol>


                <h2>Overview</h2>
                <p>The time classes required by the specification are <code>HighResolutionTime</code>, <code>AbsoluteTime</code>, <code>RelativeTime</code>, and <code>RationalTime</code> (now deprecated).</p>
                <p>Instances of <code>HighResolutionTime</code> are not created, as the class exists to provide an implementation of the other three classes. An instance of <code>AbsoluteTime</code> encapsulates an absolute time. An instance of <code>RelativeTime</code> encapsulates a point in time that is relative to some other time value.</p>
                <p>Instances of <code>RationalTime</code> (now deprecated) express a frequency by a numerator of type <code>long</code> (the frequency) and a denominator of type <code>RelativeTime</code>. When instances of <code>RationalTime</code> are used they shall behave like <code>RelativeTime</code> objects with a value of <code>interval</code> divided by <code>frequency</code>.</p>
                <p>All methods returning a time object come in both allocating and non-allocating form.</p>
                <h2>Semantics and Requirements</h2>This list establishes the semantics and requirements that are applicable across the classes of this section. Semantics that apply to particular classes, constructors, methods, and fields will be found in the class description and the constructor, method, and field detail sections.
                <ol>
                        <li>All time objects must maintain nanosecond precision and report their values in terms of millisecond and nanosecond constituents.
                        <li>Time objects must be constructed from other time objects, from millisecond/nanosecond values, from a <code>java.util.Date</code> or obtained as a result of invocations of methods on instances of the <code>Clock</code> class.
                        <li>Time objects maintain and report time values in normalized form, but the normalized form is not required for input parameter values. This allows computations individually with time constituent parts using the full <i>signed</i> range and restrictions of the underlying type.
                        <ol type="a">
                                <li>Normalization is accomplished upon method invocation by methods that accept a time object represented with individual component parts, and executed as if:
                                <ol type="i">
                                        <li>The nanosecond parameter value, which may be negative, is algebraically added to the scaled millisecond parameter value. The sign of the result provides the sign for any nonzero resulting component.
                                        <li>The absolute of the result is then partitioned, giving the number of integral milliseconds for the millisecond component, while the remaining fractional part provides the number of nanoseconds for the nanosecond component.
                                        <li>The resulting components are then represented, and reported when necessary, with the above computed sign.
                                </ol>
                                <li>Normalization is also performed on the result of operations by methods that perform time object addition and subtraction. Operations are executed using the appropriate arithmetic precision.
If the final result of an operation can be represented in normalized form, then the operation must not throw arithmetic exceptions while producing intermediate results.
                                <li>The results of time objects operations and the normalization of results of operations performed with millis and nanos, individually as Java <code>long</code> and Java <code>int</code> types respectively, are not always equivalent. This is due to the possibility of overflow for nanos values outside of the normalized nanosecond range, that is [-10<sup>6</sup>+1, 10<sup>6</sup>-1], when performing operations as <code>int</code> types, while the same values could be handled with no overflow in time object operations.
                                <li>When invoking setter methods that take as a parameter only one of the two time value components, the other component has implicitly the value of 0.
                        </ol>
                        <li>Although logically a negative time may represent time before the Epoch or a negative time interval involved in time operations, an <code>Exception</code> may be thrown if a negative absolute time or a negative time interval is given as a parameter to methods. In general, the time values accepted by a method may be a subset of the full time values range, and depend on the method.
                        <li>A <i>time object</i> is always associated with a <code>clock</code>. By default it is associated with the real-time clock. Clocks are involved both in the setting as well as the usage of time objects, for example in comparisons.</li>
                        <li>Methods are provided to facilitate the handling of time objects generically via the <code>HighResolutionTime</code> class. These methods allow the conversion, according to a <code>clock</code>, between <code>AbsoluteTime</code> objects and <code>RelativeTime</code> objects. These methods also allow the change of <code>clock</code> association of a time object. Note that the conversions depend on the time at which they are performed. The semantics of these operations are listed in the following table:
                                <table width="95%" border="1">
                                        <tr>
                                                <th>
                                                        <div align="center" nowrap>
                                                                <strong>clock association and conversion</strong><br>
                                                                <code>this</code> has <code>clock_a</code> and <code>ms,ns</code></div>
                                                </th>
                                                <th>
                                                        <div align="center">
                                                                <strong>returned/updated object</strong></div>
                                                </th>
                                        </tr>
                                        <tr>
                                                <td>
                                                        <div align="center" nowrap>
                                                                <code><font size="-1">this_is_absolute.absolute(clock_a)</font></code></div>
                                                </td>
                                                <td>
                                                        <div align="center" nowrap>
                                                                <font size="-1"><code>clock_a</code><br>
                                                                        <code>ms,ns</code></font></div>
                                                </td>
                                        </tr>
                                        <tr>
                                                <td>
                                                        <div align="center" nowrap>
                                                                <code><font size="-1">this_is_absolute.absolute(clock_b)</font></code></div>
                                                </td>
                                                <td>
                                                        <div align="center" nowrap>
                                                                <font size="-1"><code>clock_b</code><br>
                                                                        <code>ms,ns</code></font></div>
                                                </td>
                                        </tr>
                                        <tr>
                                                <td>
                                                        <div align="center" nowrap>
                                                                <code><font size="-1">this_is_absolute.absolute(null)</font></code></div>
                                                </td>
                                                <td>
                                                        <div align="center" nowrap>
                                                                <font size="-1"><code>real-time_clock</code><br>
                                                                        <code>ms,ns</code></font></div>
                                                </td>
                                        </tr>
                                        <tr>
                                                <td>
                                                        <div align="center" nowrap>
                                                                <code><font size="-1">this_is_absolute.relative(clock_a)</font></code></div>
                                                </td>
                                                <td>
                                                        <div align="center" nowrap>
                                                                <font size="-1"><code>clock_a</code><br>
                                                                        <code>clock_a.getTime().subtract(ms,ns)</code></font></div>
                                                </td>
                                        </tr>
                                        <tr>
                                                <td>
                                                        <div align="center" nowrap>
                                                                <code><font size="-1">this_is_absolute.relative(clock_b)</font></code></div>
                                                </td>
                                                <td>
                                                        <div align="center" nowrap>
                                                                <font size="-1"><code>clock_b</code><br>
                                                                        <code>clock_b.getTime().subtract(ms,ns)</code></font></div>
                                                </td>
                                        </tr>
                                        <tr>
                                                <td>
                                                        <div align="center" nowrap>
                                                                <code><font size="-1">this_is_absolute.relative(null)</font></code></div>
                                                </td>
                                                <td>
                                                        <div align="center" nowrap>
                                                                <font size="-1"><code>real-time_clock</code><br>
                                                                        <code>real-time_clock.getTime().subtract(ms,ns)</code></font></div>
                                                </td>
                                        </tr>
                                        <tr>
                                                <td>
                                                        <div align="center" nowrap>
                                                                <code><font size="-1">this_is_relative.relative(clock_a)</font></code></div>
                                                </td>
                                                <td>
                                                        <div align="center" nowrap>
                                                                <font size="-1"><code>clock_a</code><br>
                                                                        <code>ms,ns</code></font></div>
                                                </td>
                                        </tr>
                                        <tr>
                                                <td>
                                                        <div align="center" nowrap>
                                                                <code><font size="-1">this_is_relative.relative(clock_b)</font></code></div>
                                                </td>
                                                <td>
                                                        <div align="center" nowrap>
                                                                <font size="-1"><code>clock_b</code><br>
                                                                        <code>ms,ns</code></font></div>
                                                </td>
                                        </tr>
                                        <tr>
                                                <td>
                                                        <div align="center" nowrap>
                                                                <code><font size="-1">this_is_relative.relative(null)</font></code></div>
                                                </td>
                                                <td>
                                                        <div align="center" nowrap>
                                                                <font size="-1"><code>real-time_clock</code><br>
                                                                        <code>ms,ns</code></font></div>
                                                </td>
                                        </tr>
                                        <tr>
                                                <td>
                                                        <div align="center" nowrap>
                                                                <code><font size="-1">this_is_relative.absolute(clock_a)</font></code></div>
                                                </td>
                                                <td>
                                                        <div align="center" nowrap>
                                                                <font size="-1"><code>clock_a</code><br>
                                                                        <code>clock_a.getTime().add(ms,ns)</code></font></div>
                                                </td>
                                        </tr>
                                        <tr>
                                                <td>
                                                        <div align="center" nowrap>
                                                                <code><font size="-1">this_is_relative.absolute(clock_b)</font></code></div>
                                                </td>
                                                <td>
                                                        <div align="center" nowrap>
                                                                <font size="-1"><code>clock_b</code><br>
                                                                        <code>clock_b.getTime().add(ms,ns)</code></font></div>
                                                </td>
                                        </tr>
                                        <tr>
                                                <td>
                                                        <div align="center" nowrap>
                                                                <code><font size="-1">this_is_relative.absolute(null)</font></code></div>
                                                </td>
                                                <td>
                                                        <div align="center" nowrap>
                                                                <font size="-1"><code>real-time_clock</code><br>
                                                                        <code>real-time_clock.getTime().add(ms,ns)</code></font></div>
                                                </td>
                                        </tr>
                                </table>
                        </li>   
                        <li>Time objects must implement the <code>Comparable</code> interface if it is available. The <code>compareTo()</code> method must be implemented even if the interface is not available.
                </ol>
                <h2>Rationale</h2>
                <p>Time is the essence of real-time systems, and a method of expressing absolute time with sub-millisecond precision is an absolute minimum requirement. Expressing time in terms of nanoseconds has precedent and allows the implementation to provide time-based services, such as timers, using whatever precision it is capable of while the application requirements are expressed to an arbitrary level of precision.</p>
                <p>The standard Java <code>java.util.Date</code> class uses milliseconds as its basic unit in order to provide sufficient range for a wide variety of applications. Real-time programming generally requires finer resolution, and nanosecond resolution is fine enough for most purposes, but even a 64 bit real-time clock based in nanoseconds would have insufficient range in some situations, so a compound format composed of 64 bits of millisecond timing, and 32 bits of nanoseconds within a millisecond, was chosen.</p>
                <p>The expression of millisecond and nanosecond constituents is consistent with other Java interfaces.</p>
                <p>The expression of relative times allows for time-based metaphors such as deadline-based periodic scheduling where the cost of the task is expressed as a relative time and deadlines are usually represented as times relative to the beginning of the period.</p>
<P>

<P>
<HR>

<HR>

</BODY>
</HTML>
