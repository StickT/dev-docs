<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.5.0_06) on Mon Jun 26 19:39:53 EDT 2006 -->
<TITLE>
PriorityCeilingEmulation (Synchronization)
</TITLE>

<META NAME="keywords" CONTENT="javax.realtime.PriorityCeilingEmulation class">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    parent.document.title="PriorityCeilingEmulation (Synchronization)";
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
javax.realtime</FONT>
<BR>
Class PriorityCeilingEmulation</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../resources/inherit.gif" ALT="extended by "><A HREF="../../javax/realtime/MonitorControl.html" title="class in javax.realtime">javax.realtime.MonitorControl</A>
      <IMG SRC="../../resources/inherit.gif" ALT="extended by "><B>javax.realtime.PriorityCeilingEmulation</B>
</PRE>
<HR>
<DL>
<DT><PRE>public class <B>PriorityCeilingEmulation</B><DT>extends <A HREF="../../javax/realtime/MonitorControl.html" title="class in javax.realtime">MonitorControl</A></DL>
</PRE>

<P>
Monitor control class specifying the use of the priority ceiling emulation 
 protocol (also known as the "highest lockers" protocol). 
 Each <code>PriorityCeilingEmulation</code> 
 instance is immutable; it has an 
 associated <em>ceiling,</em> initialized at construction and queryable but not 
 updatable thereafter. 
 <p>
 If a thread or schedulable object synchronizes on a target object governed 
 by a <code>PriorityCeilingEmulation</code> policy, then the 
 target object becomes a priority source for the thread or schedulable
 object. When 
 the object is unlocked, it ceases serving as a priority source 
 for the thread or schedulable object. The practical effect of this rule is that the 
 thread or schedulable object's active priority is boosted to the policy's ceiling when 
 the object is locked, and is reset when the object is unlocked. 
 The value that it is reset to may or may not be the same as the 
 active priority it held when the object was locked; this depends 
 on other factors (e.g. whether the thread or schedulable object's base priority was 
 changed in the interim).
 <p>
 The 
 implementation must perform the following checks when a thread or 
 schedulable object <code>t</code> attempts to synchronize on a target object governed 
 by a <code>PriorityCeilingEmulation</code> policy with ceiling <code>ceil:</code>
 <ul>
 <li> <code>t</code>'s base priority does not exceed <code>ceil</code>
 <li> <code>t</code>'s ceiling priority (if <code>t</code> is holding any other 
 <code>PriorityCeilingEmulation</code> locks) does not exceed <code>ceil</code>.
 </ul>
 Thus for any object <code>targetObj</code> that will be governed by priority 
 ceiling emulation, the programmer needs to provide (via 
 <A HREF="../../javax/realtime/MonitorControl.html#setMonitorControl(java.lang.Object, javax.realtime.MonitorControl)"><CODE>MonitorControl.setMonitorControl(java.lang.Object, MonitorControl)</CODE></A>) a 
 <code>PriorityCeilingEmulation</code> policy whose ceiling is
 at least as high as the
 maximum of the following values:
 <ul>
  <li> the highest base priority of any thread or schedulable object that 
 could synchronize on <code>targetObj</code>
  <li> the maximum ceiling priority value that any thread or schedulable 
 object could have when it attempts to synchronize on <code>targetObj.</code>
 </ul>
 <p>
 More formally: 
 <ul>
 <li>
 If a thread or schedulable object 
 <code>t</code> whose base priority is <code>p1</code> 
 attempts to synchronize 
 on an object governed by a <code>PriorityCeilingEmulation</code> 
 policy with ceiling <code>p2,</code> 
 where <code>p1>p2,</code> then a 
 <code>CeilingViolationException</code> is thrown in <code>t.</code>
  A <code>CeilingViolationException</code> 
 is likewise thrown in <code>t</code> if 
 <code>t</code> is holding a <code>PriorityCeilingEmulation</code> lock 
 and has a ceiling priority exceeding <code>p2.</code>
 </ul>
 The values of <code>p1</code> and 
 <code>p2</code> are passed to the constructor for the exception 
 and may be queried by an exception handler. 
 <p>
 A consequence of the above rule is that a thread or schedulable object may 
 nest synchronizations on <code>PriorityCeilingEmulation</code>-governed 
 objects as 
 long as the ceiling for the inner lock is not less than the ceiling for 
 the outer lock.
 <p>
 The possibility of nested synchronizations on objects governed by a mix 
 of <code>PriorityInheritance</code> and 
 <code>PriorityCeilingEmulation</code> policies requires 
 one other piece of behavior in order to avoid unbounded priority 
 inversions.  If a thread or schedulable object holds a 
 <code>PriorityInheritance</code> lock, then any 
 <code>PriorityCeilingEmulation</code> lock that it 
 either holds or attempts to acquire will exhibit priority inheritance 
 characteristics.  This rule is captured above in the definition of 
 priority sources (4.d).
<p>
 When a thread or schedulable object
 <code>t</code> attempts to synchronize on a 
 <code>PriorityCeilingEmulation</code>-governed object with ceiling <code>ceil,</code>
 then <code>ceil</code> 
 must be within the priority range allowed by <code>t</code>'s scheduler; 
 otherwise, an <code>IllegalThreadStateException</code> is thrown. 
 Note that this does not prevent a regular Java thread 
 from synchronizing on an object governed by a 
 <code>PriorityCeilingEmulation</code> policy with a 
 ceiling higher than 10. 
 <p>
 The priority ceiling for an object <code>obj</code> can be modified by 
 invoking <code>MonitorControl.setMonitorControl(obj, newPCE)</code> 
 where <code>newPCE</code>'s ceiling has the desired value. 
 <p>
 See also <A HREF="../../javax/realtime/MonitorControl.html" title="class in javax.realtime"><CODE>MonitorControl</CODE></A> <A HREF="../../javax/realtime/PriorityInheritance.html" title="class in javax.realtime"><CODE>PriorityInheritance</CODE></A>,
 and <A HREF="../../javax/realtime/CeilingViolationException.html" title="class in javax.realtime"><CODE>CeilingViolationException</CODE></A>.
<P>

<P>
<HR>

<P>

<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../javax/realtime/PriorityCeilingEmulation.html#getCeiling()">getCeiling</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Gets the priority ceiling for this <code>PriorityCeilingEmulation</code> object.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../javax/realtime/PriorityCeilingEmulation.html#getDefaultCeiling()">getDefaultCeiling</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>Deprecated.</B>&nbsp;<I>Since 1.0.1. The method name is misleading.
  Replaced with <code>getCeiling()</code></I></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;<A HREF="../../javax/realtime/PriorityCeilingEmulation.html" title="class in javax.realtime">PriorityCeilingEmulation</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../javax/realtime/PriorityCeilingEmulation.html#getMaxCeiling()">getMaxCeiling</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Gets a <code>PriorityCeilingEmulation</code> object whose ceiling is
 <code>PriorityScheduler.instance().getMaxPriority()</code>.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;<A HREF="../../javax/realtime/PriorityCeilingEmulation.html" title="class in javax.realtime">PriorityCeilingEmulation</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../javax/realtime/PriorityCeilingEmulation.html#instance(int)">instance</A></B>(int&nbsp;ceiling)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return a <code>PriorityCeilingEmulation</code> object with the 
 specified ceiling.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_javax.realtime.MonitorControl"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class javax.realtime.<A HREF="../../javax/realtime/MonitorControl.html" title="class in javax.realtime">MonitorControl</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../javax/realtime/MonitorControl.html#getMonitorControl()">getMonitorControl</A>, <A HREF="../../javax/realtime/MonitorControl.html#getMonitorControl(java.lang.Object)">getMonitorControl</A>, <A HREF="../../javax/realtime/MonitorControl.html#setMonitorControl(javax.realtime.MonitorControl)">setMonitorControl</A>, <A HREF="../../javax/realtime/MonitorControl.html#setMonitorControl(java.lang.Object, javax.realtime.MonitorControl)">setMonitorControl</A></CODE></TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="instance(int)"><!-- --></A><H3>
instance</H3>
<PRE>
public static <A HREF="../../javax/realtime/PriorityCeilingEmulation.html" title="class in javax.realtime">PriorityCeilingEmulation</A> <B>instance</B>(int&nbsp;ceiling)</PRE>
<DL>
<DD>Return a <code>PriorityCeilingEmulation</code> object with the 
 specified ceiling. This object is in <code>ImmortalMemory.</code> 
  All invocations with the same ceiling value 
 return a reference to the same object.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>ceiling</CODE> - Priority ceiling value.
<DT><B>Throws:</B>
<DD><CODE>java.lang.IllegalArgumentException</CODE> - Thrown if <code>ceiling</code> is outside
  of the range of permitted priority values (e.g., less than 
 <code>PriorityScheduler.instance().getMinPriority()</code> or greater than
 <code>PriorityScheduler.instance().getMaxPriority()</code> for the base scheduler).<DT><B>Since:</B></DT>
  <DD>1.0.1</DD>
</DL>
</DD>
</DL>
<HR>

<A NAME="getDefaultCeiling()"><!-- --></A><H3>
getDefaultCeiling</H3>
<PRE>
public int <B>getDefaultCeiling</B>()</PRE>
<DL>
<DD><B>Deprecated.</B>&nbsp;<I>Since 1.0.1. The method name is misleading.
  Replaced with <code>getCeiling()</code></I>
<P>
<DD>Gets the priority ceiling for this <code>PriorityCeilingEmulation</code> object.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>The priority ceiling.</DL>
</DD>
</DL>
<HR>

<A NAME="getCeiling()"><!-- --></A><H3>
getCeiling</H3>
<PRE>
public int <B>getCeiling</B>()</PRE>
<DL>
<DD>Gets the priority ceiling for this <code>PriorityCeilingEmulation</code> object.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>The priority ceiling.<DT><B>Since:</B></DT>
  <DD>1.0.1</DD>
</DL>
</DD>
</DL>
<HR>

<A NAME="getMaxCeiling()"><!-- --></A><H3>
getMaxCeiling</H3>
<PRE>
public static <A HREF="../../javax/realtime/PriorityCeilingEmulation.html" title="class in javax.realtime">PriorityCeilingEmulation</A> <B>getMaxCeiling</B>()</PRE>
<DL>
<DD>Gets a <code>PriorityCeilingEmulation</code> object whose ceiling is
 <code>PriorityScheduler.instance().getMaxPriority()</code>.
  This method returns a reference to a <code>PriorityCeilingEmulation</code>
  object allocated in immortal memory.  
  All invocations of this method 
  return a reference to the same object.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>A  <code>PriorityCeilingEmulation</code> object whose ceiling is
 <code>PriorityScheduler.instance().getMaxPriority().</code><DT><B>Since:</B></DT>
  <DD>1.0.1</DD>
</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>

<HR>

</BODY>
</HTML>
